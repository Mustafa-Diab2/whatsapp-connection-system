# Railway Configuration
# لنشر Backend على Railway

[build]
builder = "NIXPACKS"

[deploy]
startCommand = "cd apps/api && npm run dev"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[nixpacks]
aptPkgs = ["chromium", "chromium-sandbox", "ca-certificates", "fonts-liberation", "libgbm1", "libnss3", "libatk-bridge2.0-0", "libdrm2", "libxkbcommon0", "libxcomposite1", "libxdamage1", "libxfixes3", "libxrandr2", "libcups2", "libasound2"]

[nixpacks.phases.setup]
nixPkgs = ["chromium"]

[nixpacks.phases.install]
cmds = ["cd apps/api && npm install"]

[nixpacks.phases.build]
cmds = ["echo 'Build complete'"]
