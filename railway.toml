# Railway Configuration
# لنشر Backend على Railway

[build]
builder = "NIXPACKS"

[deploy]
startCommand = "cd apps/api && npm install && npm run dev"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[nixpacks]
# تثبيت Chromium للـ WhatsApp Web
[nixpacks.phases.setup]
aptPkgs = ["chromium", "chromium-sandbox", "ca-certificates", "fonts-liberation"]

[nixpacks.phases.install]
cmds = ["npm install"]

[nixpacks.phases.build]
cmds = ["echo 'Build complete'"]
